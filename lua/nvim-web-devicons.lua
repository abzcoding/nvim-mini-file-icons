local icons = {
	[".bashprofile"] = {
		icon = "Ó§ñ",
		color = "#825078",
		cterm_color = "113",
		name = "BashProfile",
	},
	[".bashrc"] = {
		icon = "Ó§ñ",
		color = "#825078",
		cterm_color = "113",
		name = "Bashrc",
	},
	[".babelrc"] = {
		icon = "Ô¨•",
		color = "#f4bf75",
		term_color = "185",
		name = "Babelrc",
	},
	[".DS_Store"] = {
		icon = "Óòï",
		color = "#41535b",
		cterm_color = "59",
		name = "DsStore",
	},
	[".env"] = {
		icon = "Ôë¢",
		color = "#faf743",
		cterm_color = "226",
		name = "Env",
	},

	[".gitattributes"] = {
		icon = "Ó§¨",
		color = "#ac4142",
		cterm_color = "59",
		name = "GitAttributes",
	},
	[".gitconfig"] = {
		icon = "Ó§¨",
		color = "#ac4142",
		cterm_color = "59",
		name = "GitConfig",
	},
	[".gitignore"] = {
		icon = "Ó§¨",
		color = "#ac4142",
		cterm_color = "59",
		name = "GitIgnore",
	},
	[".gitlab-ci.yml"] = {
		icon = "Ôäñ",
		color = "#e24329",
		cterm_color = "166",
		name = "GitlabCI",
	},
	[".gitmodules"] = {
		icon = "Ó§¨",
		color = "#ac4142",
		cterm_color = "59",
		name = "GitIgnore",
	},
	[".gvimrc"] = {
		icon = "Óò´",
		color = "#019833",
		cterm_color = "29",
		name = "Gvimrc",
	},
	[".npmignore"] = {
		icon = "Ó•Ñ",
		color = "#E8274B",
		cterm_color = "161",
		name = "NPMIgnore",
	},
	[".settings.json"] = {
		icon = "Óúå",
		color = "#854CC7",
		cterm_color = "98",
		name = "SettingsJson",
	},
	[".vimrc"] = {
		icon = "Óò´",
		color = "#019833",
		cterm_color = "29",
		name = "Vimrc",
	},
	[".zshrc"] = {
		icon = "Ó•ç",
		color = "#6a9fb5",
		cterm_color = "113",
		name = "Zshrc",
	},
	[".zshenv"] = {
		icon = "Ó•ç",
		color = "#6a9fb5",
		cterm_color = "113",
		name = "Zshenv",
	},
	[".zprofile"] = {
		icon = "Ó•ç",
		color = "#6a9fb5",
		cterm_color = "113",
		name = "Zshprofile",
	},

	["awk"] = {
		icon = "Ó§µ",
		color = "#6a9fb5",
		cterm_color = "59",
		name = "Awk",
	},
	["bash"] = {
		icon = "Ó•ç",
		color = "#aa759f",
		cterm_color = "113",
		name = "Bash",
	},
	["bat"] = {
		icon = "Ó§ß",
		color = "#aa759f",
		cterm_color = "154",
		name = "Bat",
	},

	["bmp"] = {
		icon = "Ó§ö",
		color = "#ac4142",
		cterm_color = "140",
		name = "Bmp",
	},
	["Brewfile"] = {
		icon = "Óûë",
		color = "#701516",
		cterm_color = "52",
		name = "Brewfile",
	},

	["c"] = {
		icon = "Ó§Ä",
		color = "#6a9fb5",
		cterm_color = "75",
		name = "C",
	},
	["c++"] = {
		icon = "Ó§∑",
		color = "#6a9fb5",
		cterm_color = "204",
		name = "CPlusPlus",
	},
	["cc"] = {
		icon = "Ó§∑",
		color = "#6a9fb5",
		cterm_color = "204",
		name = "CPlusPlus",
	},
	["cfg"] = {
		icon = "Ó§ñ",
		color = "#f4bf75",
		cterm_color = "231",
		name = "Configuration",
	},
	["clj"] = {
		icon = "Óù®",
		color = "#6a9fb5",
		cterm_color = "107",
		name = "Clojure",
	},
	["cljc"] = {
		icon = "Óù®",
		color = "#90a959",
		cterm_color = "107",
		name = "ClojureC",
	},
	["cljs"] = {
		icon = "Óù™",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "ClojureJS",
	},

	["CMakeLists.txt"] = {
		icon = "Ó§ñ",
		color = "#90a959",
		cterm_color = "66",
		name = "CMakeLists",
	},
	["cmake"] = {
		icon = "Ó•ñ",
		color = "#90a959",
		cterm_color = "66",
		name = "CMake",
	},

	["conf"] = {
		icon = "Ó§ñ",
		color = "#f4bf75",
		cterm_color = "66",
		name = "Conf",
	},
	["COMMIT_EDITMSG"] = {
		icon = "Ó§¨",
		color = "#ac4142",
		cterm_color = "59",
		name = "GitCommit",
	},
	["COPYING"] = {
		icon = "Óòä",
		color = "#cbcb41",
		cterm_color = "185",
		name = "License",
	},
	["COPYING.LESSER"] = {
		icon = "Óòä",
		color = "#cbcb41",
		cterm_color = "185",
		name = "License",
	},
	["config.ru"] = {
		icon = "Ó§≤",
		color = "#ac4142",
		cterm_color = "52",
		name = "ConfigRu",
	},
	["cp"] = {
		icon = "Ó§∑",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Cp",
	},
	["cpp"] = {
		icon = "Ó§∑",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Cpp",
	},
	["cs"] = {
		icon = "Ô†ö",
		color = "#6a9fb5",
		cterm_color = "58",
		name = "Cs",
	},
	["css"] = {
		icon = "Ó§®",
		color = "#6a9fb5",
		cterm_color = "39",
		name = "Css",
	},
	["csv"] = {
		icon = "Ôúò",
		color = "#89e051",
		cterm_color = "113",
		name = "Csv",
	},
	["cxx"] = {
		icon = "Óòù",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Cxx",
	},
	["d"] = {
		icon = "ÓûØ",
		color = "#427819",
		cterm_color = "64",
		name = "D",
	},
	["dart"] = {
		icon = "Ó§©",
		color = "#75b5aa",
		cterm_color = "25",
		name = "Dart",
	},
	["db"] = {
		icon = "Ó§Å",
		color = "#d28445",
		cterm_color = "188",
		name = "Db",
	},
	["desktop"] = {
		icon = "ÔÑà",
		color = "#563d7c",
		cterm_color = "60",
		name = "DesktopEntry",
	},
	["diff"] = {
		icon = "Óú®",
		color = "#41535b",
		cterm_color = "59",
		name = "Diff",
	},
	["doc"] = {
		icon = "Ôú´",
		color = "#185abd",
		cterm_color = "25",
		name = "Doc",
	},
	["dockerfile"] = {
		icon = "Ó§π",
		color = "#46788d",
		cterm_color = "59",
		name = "Dockerfile",
	},
	["dump"] = {
		icon = "ÓúÜ",
		color = "#d28445",
		cterm_color = "188",
		name = "Dump",
	},
	["edn"] = {
		icon = "Óù™",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Edn",
	},
	["eex"] = {
		icon = "Ó§Ç",
		color = "#aa759f",
		cterm_color = "140",
		name = "Eex",
	},
	["ejs"] = {
		icon = "Ó§∫",
		color = "#90a959",
		cterm_color = "185",
		name = "Ejs",
	},

	["erl"] = {
		icon = "Ó§™",
		color = "#ac4142",
		cterm_color = "132",
		name = "Erl",
	},
	["ex"] = {
		icon = "Ó§Ç",
		color = "#825078",
		cterm_color = "140",
		name = "Ex",
	},
	["exs"] = {
		icon = "Ó§Ç",
		color = "#825078",
		cterm_color = "140",
		name = "Exs",
	},

	["f#"] = {
		icon = "Ó§´",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Fsharp",
	},
	["favicon.ico"] = {
		icon = "Óò£",
		color = "#f4bf75",
		cterm_color = "185",
		name = "Favicon",
	},
	["fnl"] = {
		color = "#fff3d7",
		icon = "üåú",
		cterm_color = "230",
		name = "Fennel",
	},
	["fish"] = {
		icon = "Óûï",
		color = "#4d5a5e",
		cterm_color = "59",
		name = "Fish",
	},
	["fs"] = {
		icon = "Ó§´",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Fs",
	},
	["fsi"] = {
		icon = "Ó§´",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Fsi",
	},
	["fsscript"] = {
		icon = "Ó§´",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Fsscript",
	},
	["fsx"] = {
		icon = "Ó§´",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Fsx",
	},

	["gemspec"] = {
		icon = "Ó§≤",
		color = "#ac4142",
		cterm_color = "52",
		name = "Gemspec",
	},
	["gif"] = {
		icon = "Ó§ö",
		color = "#f4bf75",
		cterm_color = "140",
		name = "Gif",
	},
	["git"] = {
		icon = "Ó§¨",
		color = "#ac4142",
		cterm_color = "202",
		name = "GitLogo",
	},
	["Gemfile$"] = {
		icon = "Ó§≤",
		color = "#ac4142",
		cterm_color = "52",
		name = "Gemfile",
	},
	["go"] = {
		icon = "Óòß",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Go",
	},
	["gruntfile"] = {
		icon = "Óòë",
		color = "#f4bf75",
		cterm_color = "173",
		name = "Gruntfile",
	},
	["gulpfile"] = {
		icon = "Óòê",
		color = "#ac4142",
		cterm_color = "167",
		name = "Gulpfile",
	},

	["h"] = {
		icon = "ÔÉΩ",
		color = "#a074c4",
		cterm_color = "140",
		name = "H",
	},
	["hbs"] = {
		icon = "Óòè",
		color = "#d28445",
		cterm_color = "208",
		name = "Hbs",
	},
	["hh"] = {
		icon = "ÔÉΩ",
		color = "#a074c4",
		cterm_color = "140",
		name = "Hh",
	},
	["hpp"] = {
		icon = "ÔÉΩ",
		color = "#a074c4",
		cterm_color = "140",
		name = "Hpp",
	},

	["hs"] = {
		icon = "Óòü",
		color = "#aa759f",
		cterm_color = "140",
		name = "Hs",
	},
	["htm"] = {
		icon = "Ó§Æ",
		color = "#d28445",
		cterm_color = "166",
		name = "Htm",
	},
	["html"] = {
		icon = "Ó§Æ",
		color = "#d28445",
		cterm_color = "202",
		name = "Html",
	},

	["erb"] = {
		icon = "Ó§™",
		color = "#ac4142",
		cterm_color = "52",
		name = "Erb",
	},
	["hxx"] = {
		icon = "ÔÉΩ",
		color = "#a074c4",
		cterm_color = "140",
		name = "Hxx",
	},

	["ico"] = {
		icon = "Ó§ö",
		color = "#f4bf75",
		cterm_color = "185",
		name = "Ico",
	},
	["ini"] = {
		icon = "Ó§ñ",
		color = "#f4bf75",
		cterm_color = "66",
		name = "Ini",
	},

	["java"] = {
		icon = "Ó§É",
		color = "#aa759f",
		cterm_color = "167",
		name = "Java",
	},
	["jl"] = {
		icon = "Ó•Ä",
		color = "#aa759f",
		cterm_color = "133",
		name = "Jl",
	},
	["jpeg"] = {
		icon = "Ó§ö",
		color = "#90a959",
		cterm_color = "140",
		name = "Jpeg",
	},
	["jpg"] = {
		icon = "Ó§ö",
		color = "#90a959",
		cterm_color = "140",
		name = "Jpg",
	},
	["js"] = {
		icon = "Óòå",
		color = "#f4bf75",
		cterm_color = "185",
		name = "Js",
	},
	["json"] = {
		icon = "Óòã",
		color = "#cbcb41",
		cterm_color = "185",
		name = "Json",
	},
	["jsx"] = {
		icon = "Óò•",
		color = "#519aba",
		cterm_color = "67",
		name = "Jsx",
	},

	["leex"] = {
		icon = "Ó§Ç",
		color = "#aa759f",
		cterm_color = "140",
		name = "Leex",
	},
	["lhs"] = {
		icon = "Óòü",
		color = "#46788d",
		cterm_color = "140",
		name = "Lhs",
	},
	["lock"] = {
		icon = "ÔÑæ",
		color = "#bbbbbb",
		cterm_color = "250",
		name = "Lock",
	},
	["log"] = {
		icon = "Ô†±",
		color = "#ffffff",
		cterm_color = "white",
		name = "Log",
	},

	["LICENSE"] = {
		icon = "Ó§ù",
		color = "#6a9fb5",
		cterm_color = "179",
		name = "License",
	},
	["lua"] = {
		icon = "Ó•Ç",
		color = "#51a0cf",
		cterm_color = "74",
		name = "Lua",
	},

	["makefile"] = {
		icon = "Ôáó",
		color = "#f4bf75",
		name = "Makefile",
	},
	["markdown"] = {
		icon = "Ó§Ø",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Markdown",
	},
	["md"] = {
		icon = "Ó§Ø",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Md",
	},
	["mdx"] = {
		icon = "Ó§Ø",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Mdx",
	},

	["mix.lock"] = {
		icon = "Ó§Ç",
		color = "#c7a4c0",
		name = "MixLock",
	},
	["mjs"] = {
		icon = "Ó§Ñ",
		color = "#6a9fb5",
		name = "Mjs",
	},
	["mo"] = {
		icon = "‚àû",
		color = "#9772FB",
		cterm_color = "99",
		name = "Motoko",
	},
	["mustache"] = {
		icon = "Óòè",
		color = "#d28445",
		name = "Mustache",
	},

	["nix"] = {
		icon = "Ó•É",
		color = "#75b5aa",
		name = "Nix",
	},
	["node_modules"] = {
		icon = "Ó•Ñ",
		color = "#90a959",
		name = "NodeModules",
	},

	["Procfile"] = {
		icon = "Ó§∞",
		color = "#aa759f",
		name = "Procfile",
	},
	["prisma"] = {
		icon = "Ô®µ",
		color = "#ffffff",
		cterm_color = "white",
		name = "Prisma",
	},
	["php"] = {
		icon = "Ó•Ö",
		color = "#46788d",
		name = "Php",
	},
	["pl"] = {
		icon = "ÔÜù",
		color = "#6a9fb5",
		name = "Pl",
	},
	["pm"] = {
		icon = "Óù©",
		color = "#46788d",
		name = "Pm",
	},
	["png"] = {
		icon = "Ó§ö",
		color = "#d28445",
		name = "Png",
	},
	["pp"] = {
		icon = "Ôíô",
		color = "#aa759f",
		name = "Pp",
	},
	["ps1"] = {
		icon = "Óûï",
		color = "#6a9fb5",
		name = "PromptPs1",
	},

	["py"] = {
		icon = "Ó§±",
		color = "#46788d",
		name = "Py",
	},
	["pyc"] = {
		icon = "Ó§±",
		color = "#825078",
		name = "Pyc",
	},
	["pyd"] = {
		icon = "Ó§±",
		color = "#825078",
		name = "Pyd",
	},
	["pyo"] = {
		icon = "Ó§±",
		color = "#825078",
		name = "Pyo",
	},

	["R"] = {
		icon = "Ó•á",
		color = "#6a9fb5",
		cterm_color = "65",
		name = "R",
	},
	["rake"] = {
		icon = "Ó§≤",
		color = "#ac4142",
		name = "Rake",
	},
	["rakefile"] = {
		icon = "Ó§≤",
		color = "#ac4142",
		name = "Rakefile",
	},
	["rb"] = {
		icon = "Ó§≤",
		color = "#ac4142",
		name = "Rb",
	},
	["rlib"] = {
		icon = "Ó•á",
		color = "#be7953",
		name = "Rlib",
	},

	["Rmd"] = {
		icon = "Ó•à",
		color = "#ac4142",
		cterm_color = "67",
		name = "Rmd",
	},
	["rproj"] = {
		icon = "Ó•â",
		color = "#9dc0ce",
		name = "Rproj",
	},

	["rss"] = {
		icon = "ÔÜ∑",
		color = "#d28445",
		name = "Rss",
	},

	["sass"] = {
		icon = "Ó§¥",
		color = "#b3008f",
		name = "Sass",
	},
	["scala"] = {
		icon = "Ó§Ü",
		color = "#ac4142",
		name = "Scala",
	},
	["scss"] = {
		icon = "Ó§¥",
		color = "#b3008f",
		name = "Scss",
	},
	["sh"] = {
		icon = "Ó•ç",
		color = "#aa759f",
		name = "Sh",
	},
	["slim"] = {
		icon = "Óòé",
		color = "#d28445",
		name = "Slim",
	},

	["sql"] = {
		icon = "Ó§Å",
		color = "#d28445",
		name = "Sql",
	},
	["svg"] = {
		icon = "Ó§á",
		color = "#ee9e2e",
		name = "Svg",
	},

	["t"] = {
		icon = "Óù©",
		color = "#6a9fb5",
		name = "Tor",
	},
	["tex"] = {
		icon = "Ó•Å",
		color = "#6a9fb5",
		name = "Tex",
	},
	["toml"] = {
		icon = "Ó•é",
		color = "#90a959",
		name = "Toml",
	},
	["ts"] = {
		icon = "Ó•ê",
		color = "#6a9fb5",
		name = "Ts",
	},
	["tsx"] = {
		icon = "Ó•è",
		color = "#9dc0ce",
		name = "Tsx",
	},
	["twig"] = {
		icon = "Óòú",
		color = "#90a959",
		name = "Twig",
	},

	["Vagrantfile$"] = {
		icon = "Ôä∏",
		color = "#75b5aa",
		cterm_color = "27",
		name = "Vagrantfile",
	},
	["vim"] = {
		-- icon = "Ó•ô",
		icon = "Óò´",
		color = "#90a959",
		name = "Vim",
	},
	["vue"] = {
		icon = "Ó•ë",
		color = "#b2c38b",
		name = "Vue",
	},

	["webmanifest"] = {
		icon = "Ó§ñ",
		color = "#f4bf75",
		name = "Webmanifest",
	},
	["webp"] = {
		icon = "Ó§ö",
		color = "#46788d",
		name = "Webp",
	},

	["yaml"] = {
		icon = "Ó•ì",
		color = "#ac4142",
		name = "Yaml",
	},
	["yml"] = {
		icon = "Ó•ì",
		color = "#ac4142",
		name = "Yml",
	},

	["zsh"] = {
		icon = "Ó•ç",
		color = "#6a9fb5",
		name = "Zsh",
	},
	["tbc"] = {
		icon = "ÔØë",
		color = "#1e5cb3",
		cterm_color = "67",
		name = "Tcl",
	},
	["tcl"] = {
		icon = "ÔØë",
		color = "#1e5cb3",
		cterm_color = "67",
		name = "Tcl",
	},
	["terminal"] = {
		icon = "Ó•ç",
		color = "#6a9fb5",
		name = "Terminal",
	},

	["pdf"] = {
		icon = "Ôú§",
		color = "#ac4142",
		name = "Pdf",
	},
	["kt"] = {
		icon = "Ó•ó",
		color = "#46788d",
		name = "Kotlin",
	},
	["kts"] = {
		icon = "ùôÜ",
		color = "#F88A02",
		cterm_color = "208",
		name = "KotlinScript",
	},
	["otf"] = {
		icon = "Ó•ò",
		color = "#90a959",
		name = "OpenTypeFont",
	},
	["sv"] = {
		icon = "Ô°ö",
		color = "#019833",
		cterm_color = "29",
		name = "SystemVerilog",
	},
	["svh"] = {
		icon = "Ô°ö",
		color = "#019833",
		cterm_color = "29",
		name = "SystemVerilog",
	},
	["svelte"] = {
		icon = "Ó•ã",
		color = "#d28445",
		name = "Svelte",
	},
	["pro"] = {
		icon = "Óû°",
		color = "#75b5aa",
		name = "Prolog",
	},
	["v"] = {
		icon = "Ô°ö",
		color = "#019833",
		cterm_color = "29",
		name = "Verilog",
	},
	["vh"] = {
		icon = "Ô°ö",
		color = "#019833",
		cterm_color = "29",
		name = "Verilog",
	},
	["vhd"] = {
		icon = "Ô°ö",
		color = "#019833",
		cterm_color = "29",
		name = "VHDL",
	},
	["vhdl"] = {
		icon = "Ô°ö",
		color = "#019833",
		cterm_color = "29",
		name = "VHDL",
	},
	["xml"] = {
		icon = "Ô™ø",
		color = "#6a9fb5",
		cterm_color = "173",
		name = "Xml",
	},
	["webpack"] = {
		icon = "Ó•í",
		color = "#6a9fb5",
		cterm_color = "67",
		name = "Webpack",
	},
	["zig"] = {
		icon = "Ó•î",
		color = "#d28445",
		name = "Zig",
	},
}

local default_icon = {
	icon = "Ó§§",
	color = "#6d8086",
	name = "Default",
}

local global_opts = {
	override = {},
	default = false,
}

local function get_highlight_name(data)
	return data.name and "DevIcon" .. data.name
end

local function set_up_highlight(icon_data)
	local hl_group = get_highlight_name(icon_data)
	if hl_group then
		local highlight_command = "highlight! " .. hl_group

		if icon_data.color then
			highlight_command = highlight_command .. " guifg=" .. icon_data.color
		end

		if icon_data.cterm_color then
			highlight_command = highlight_command .. " ctermfg=" .. icon_data.cterm_color
		end

		if icon_data.color or icon_data.cterm_color then
			vim.api.nvim_command(highlight_command)
		end
	end
end

local function highlight_exists(group)
	if not group then
		return
	end

	local ok, hl = pcall(vim.api.nvim_get_hl_by_name, group, true)
	return ok and not (hl or {})[true]
end

local function set_up_highlights()
	for _, icon_data in pairs(icons) do
		local has_color = icon_data.color or icon_data.cterm_color
		local name_valid = icon_data.name and not highlight_exists(get_highlight_name(icon_data))
		if has_color and name_valid then
			set_up_highlight(icon_data)
		end
	end
end

local loaded = false

local function setup(opts)
	if loaded then
		return
	end

	loaded = true

	local user_icons = opts or {}

	if user_icons.default then
		global_opts.default = true
	end

	if user_icons.override and user_icons.override.default_icon then
		default_icon = user_icons.override.default_icon
	end

	icons = vim.tbl_extend("force", icons, user_icons.override or {})

	table.insert(icons, default_icon)

	set_up_highlights()

	vim.cmd([[augroup NvimWebDevicons]])
	vim.cmd([[autocmd!]])
	vim.cmd([[autocmd ColorScheme * lua require("nvim-web-devicons").set_up_highlights()]])
	vim.cmd([[augroup END]])
end

local function get_icon(name, ext, opts)
	ext = ext or name:match("^.*%.(.*)$") or ""
	if not loaded then
		setup()
	end

	local has_default = (opts and opts.default) or global_opts.default
	local icon_data = icons[name] or icons[ext] or (has_default and default_icon)

	if icon_data then
		return icon_data.icon, get_highlight_name(icon_data)
	end
end

local function get_highlight_foreground(icon_data)
	return string.format("#%06x", vim.api.nvim_get_hl_by_name(get_highlight_name(icon_data), true).foreground)
end

local function get_highlight_ctermfg(icon_data)
	local _, _, ctermfg = string.find(vim.fn.execute("highlight " .. get_highlight_name(icon_data)), "ctermfg=(%d+)")
	return ctermfg
end

local function get_icon_colors(name, ext, opts)
	ext = ext or name:match("^.*%.(.*)$") or ""
	if not loaded then
		setup()
	end

	local has_default = (opts and opts.default) or global_opts.default
	local icon_data = icons[name] or icons[ext] or (has_default and default_icon)

	if icon_data then
		local color = icon_data.color
		local cterm_color = icon_data.cterm_color
		if icon_data.name and highlight_exists(get_highlight_name(icon_data)) then
			color = get_highlight_foreground(icon_data) or color
			cterm_color = get_highlight_ctermfg(icon_data) or cterm_color
		end
		return icon_data.icon, color, cterm_color
	end
end

local function get_icon_color(name, ext, opts)
	local data = { get_icon_colors(name, ext, opts) }
	return data[1], data[2]
end

local function set_icon(user_icons)
	icons = vim.tbl_extend("force", icons, user_icons)
	for _, icon_data in pairs(user_icons) do
		set_up_highlight(icon_data)
	end
end
local filetypes = {
	["Brewfile"] = "Brewfile",
	["COMMIT"] = "COMMIT_EDITMSG",
	["COPYING"] = "COPYING",
	["Gemfile"] = "Gemfile$",
	["LESSER"] = "COPYING.LESSER",
	["LICENSE"] = "LICENSE",
	["Vagrantfile"] = "Vagrantfile$",
	["awk"] = "awk",
	["bmp"] = "bmp",
	["c"] = "c",
	["cfg"] = "cfg",
	["clojure"] = "clj",
	["cmake"] = "cmake",
	["cobol"] = "cobol",
	["coffee"] = "coffee",
	["conf"] = "conf",
	["cp"] = "cp",
	["cpp"] = "cpp",
	["cr"] = "cr",
	["cs"] = "cs",
	["csh"] = "csh",
	["cson"] = "cson",
	["css"] = "css",
	["csv"] = "csv",
	["d"] = "d",
	["dart"] = "dart",
	["desktop"] = "desktop",
	["diff"] = "diff",
	["doc"] = "doc",
	["dockerfile"] = "dockerfile",
	["dosbatch"] = "bat",
	["dosini"] = "ini",
	["drools"] = "drl",
	["dropbox"] = "dropbox",
	["dump"] = "dump",
	["eex"] = "eex",
	["ejs"] = "ejs",
	["elixir"] = "ex",
	["elm"] = "elm",
	["epuppet"] = "epp",
	["erlang"] = "erl",
	["eruby"] = "erb",
	["fennel"] = "fnl",
	["fish"] = "fish",
	["forth"] = "fs",
	["fortran"] = "f#",
	["fsi"] = "fsi",
	["fsscript"] = "fsscript",
	["fsx"] = "fsx",
	["gd"] = "gd",
	["gif"] = "gif",
	["git"] = "git",
	["gitconfig"] = ".gitconfig",
	["glb"] = "glb",
	["go"] = "go",
	["godot"] = "godot",
	["gruntfile"] = "gruntfile",
	["gulpfile"] = "gulpfile",
	["haml"] = "haml",
	["haskell"] = "hs",
	["hbs"] = "hbs",
	["heex"] = "heex",
	["html"] = "html",
	["ico"] = "ico",
	["idlang"] = "pro",
	["import"] = "import",
	["java"] = "java",
	["javascript"] = "js",
	["javascript.jsx"] = "jsx",
	["javascriptreact"] = "jsx",
	["jpeg"] = "jpeg",
	["jpg"] = "jpg",
	["json"] = "json",
	["julia"] = "jl",
	["kotlin"] = "kt",
	["leex"] = "leex",
	["less"] = "less",
	["lhaskell"] = "lhs",
	["license"] = "license",
	["log"] = "log",
	["lock"] = "lock",
	["lprolog"] = "sig",
	["lua"] = "lua",
	["make"] = "makefile",
	["markdown"] = "markdown",
	["material"] = "material",
	["mdx"] = "mdx",
	["mint"] = "mint",
	["motoko"] = "mo",
	["mustache"] = "mustache",
	["nim"] = "nim",
	["nix"] = "nix",
	["node"] = "node_modules",
	["ocaml"] = "ml",
	["opus"] = "opus",
	["otf"] = "otf",
	["pck"] = "pck",
	["pdf"] = "pdf",
	["perl"] = "pl",
	["php"] = "php",
	["plaintex"] = "tex",
	["png"] = "png",
	["postscr"] = "ai",
	["ppt"] = "ppt",
	["prisma"] = "prisma",
	["procfile"] = "Procfile",
	["ps1"] = "ps1",
	["psb"] = "psb",
	["psd"] = "psd",
	["puppet"] = "pp",
	["pyc"] = "pyc",
	["pyd"] = "pyd",
	["pyo"] = "pyo",
	["python"] = "py",
	["r"] = "r",
	["rlib"] = "rlib",
	["rmd"] = "rmd",
	["rproj"] = "rproj",
	["ruby"] = "rb",
	["rust"] = "rs",
	["sass"] = "sass",
	["scala"] = "scala",
	["scss"] = "scss",
	["sh"] = "sh",
	["slim"] = "slim",
	["sln"] = "sln",
	["sml"] = "sml",
	["solidity"] = "sol",
	["sql"] = "sql",
	["sqlite"] = "sqlite",
	["sqlite3"] = "sqlite3",
	["styl"] = "styl",
	["sublime"] = "sublime",
	["suo"] = "suo",
	["svelte"] = "svelte",
	["svg"] = "svg",
	["swift"] = "swift",
	["systemverilog"] = "sv",
	["tads"] = "t",
	["tcl"] = "tcl",
	["terminal"] = "terminal",
	["toml"] = "toml",
	["tres"] = "tres",
	["tscn"] = "tscn",
	["twig"] = "twig",
	["txt"] = "txt",
	["typescript"] = "ts",
	["typescriptreact"] = "tsx",
	["verilog"] = "v",
	["vhdl"] = "vhd",
	["vim"] = "vim",
	["vue"] = "vue",
	["webp"] = "webp",
	["webpack"] = "webpack",
	["xcplayground"] = "xcplayground",
	["xls"] = "xls",
	["xml"] = "xml",
	["yaml"] = "yaml",
	["zig"] = "zig",
	["zsh"] = "zsh",
}
local function get_icon_name_by_filetype(ft)
	return filetypes[ft]
end

local function get_icon_by_filetype(ft, opts)
	local name = get_icon_name_by_filetype(ft)
	return get_icon(name or "", nil, opts)
end

return {
	get_icon = get_icon,
	set_icon = set_icon,
	get_icon_by_filetype = get_icon_by_filetype,
	get_icon_colors = get_icon_colors,
	get_icon_color = get_icon_color,
	setup = setup,
	has_loaded = function()
		return loaded
	end,
	get_icons = function()
		return icons
	end,
	set_up_highlights = set_up_highlights,
}
